// auto generated by kmigrator
// KMIGRATOR:0003_function_owner:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS40IG9uIDIwMjAtMTItMTIgMTI6NTcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMDJfZnVuY3Rpb24nKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J2Z1bmN0aW9uJywKICAgICAgICAgICAgbmFtZT0nb3duZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J293bmVyJywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field owner to function
--
ALTER TABLE "Function" ADD COLUMN "owner" integer NULL CONSTRAINT "Function_owner_6bbbcdee_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Function_owner_6bbbcdee_fk_User_id" IMMEDIATE;
CREATE INDEX "Function_owner_6bbbcdee" ON "Function" ("owner");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field owner to function
--
ALTER TABLE "Function" DROP COLUMN "owner" CASCADE;
COMMIT;

    `)
}

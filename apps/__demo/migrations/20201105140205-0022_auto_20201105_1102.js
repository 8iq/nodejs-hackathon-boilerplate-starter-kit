// auto generated by kmigrator
// KMIGRATOR:0022_auto_20201105_1102:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS4yIG9uIDIwMjAtMTEtMDUgMTE6MDIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMjFfYXV0b18yMDIwMTAxNl8wODM1JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0JywKICAgICAgICAgICAgbmFtZT0nY3JlYXRlZEF0X29mZnNldCcsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3Rlc3QnLAogICAgICAgICAgICBuYW1lPSdjcmVhdGVkQXRfdXRjJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkRhdGVUaW1lRmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3Rlc3QnLAogICAgICAgICAgICBuYW1lPSdjcmVhdGVkQnknLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J2NyZWF0ZWRCeScsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uRE9fTk9USElORywgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnVzZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3Rlc3QnLAogICAgICAgICAgICBuYW1lPSd1cGRhdGVkQXRfb2Zmc2V0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLlRleHRGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVzdCcsCiAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRBdF91dGMnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRGF0ZVRpbWVGaWVsZChibGFuaz1UcnVlLCBudWxsPVRydWUpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVzdCcsCiAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRCeScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0ndXBkYXRlZEJ5JywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BZGRGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVzdCcsCiAgICAgICAgICAgIG5hbWU9J3YnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSW50ZWdlckZpZWxkKGRlZmF1bHQ9MSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field createdAt_offset to test
--
ALTER TABLE "Test" ADD COLUMN "createdAt_offset" text NULL;
--
-- Add field createdAt_utc to test
--
ALTER TABLE "Test" ADD COLUMN "createdAt_utc" timestamp with time zone NULL;
--
-- Add field createdBy to test
--
ALTER TABLE "Test" ADD COLUMN "createdBy" integer NULL CONSTRAINT "Test_createdBy_9a764e99_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Test_createdBy_9a764e99_fk_User_id" IMMEDIATE;
--
-- Add field updatedAt_offset to test
--
ALTER TABLE "Test" ADD COLUMN "updatedAt_offset" text NULL;
--
-- Add field updatedAt_utc to test
--
ALTER TABLE "Test" ADD COLUMN "updatedAt_utc" timestamp with time zone NULL;
--
-- Add field updatedBy to test
--
ALTER TABLE "Test" ADD COLUMN "updatedBy" integer NULL CONSTRAINT "Test_updatedBy_6e1a57ea_fk_User_id" REFERENCES "User"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Test_updatedBy_6e1a57ea_fk_User_id" IMMEDIATE;
--
-- Add field v to test
--
ALTER TABLE "Test" ADD COLUMN "v" integer DEFAULT 1 NOT NULL;
ALTER TABLE "Test" ALTER COLUMN "v" DROP DEFAULT;
CREATE INDEX "Test_createdBy_9a764e99" ON "Test" ("createdBy");
CREATE INDEX "Test_updatedBy_6e1a57ea" ON "Test" ("updatedBy");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field v to test
--
ALTER TABLE "Test" DROP COLUMN "v" CASCADE;
--
-- Add field updatedBy to test
--
ALTER TABLE "Test" DROP COLUMN "updatedBy" CASCADE;
--
-- Add field updatedAt_utc to test
--
ALTER TABLE "Test" DROP COLUMN "updatedAt_utc" CASCADE;
--
-- Add field updatedAt_offset to test
--
ALTER TABLE "Test" DROP COLUMN "updatedAt_offset" CASCADE;
--
-- Add field createdBy to test
--
ALTER TABLE "Test" DROP COLUMN "createdBy" CASCADE;
--
-- Add field createdAt_utc to test
--
ALTER TABLE "Test" DROP COLUMN "createdAt_utc" CASCADE;
--
-- Add field createdAt_offset to test
--
ALTER TABLE "Test" DROP COLUMN "createdAt_offset" CASCADE;
COMMIT;

    `)
}

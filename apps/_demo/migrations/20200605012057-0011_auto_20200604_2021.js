// auto generated by kmigrator
// KMIGRATOR:0011_auto_20200604_2021:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMC42IG9uIDIwMjAtMDYtMDQgMjA6MjEKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMTBfYXV0b18yMDIwMDYwNF8yMDEyJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J29yZ2FuaXphdGlvbnRvdXNlcmxpbmsnLAogICAgICAgICAgICBuYW1lPSdyb2xlJywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkNoYXJGaWVsZChibGFuaz1UcnVlLCBjaG9pY2VzPVsoJ293bmVyJywgJ293bmVyJyksICgnbWVtYmVyJywgJ21lbWJlcicpXSwgbWF4X2xlbmd0aD01MCwgbnVsbD1UcnVlKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0nb3JnYW5pemF0aW9udG91c2VybGluaycsCiAgICAgICAgICAgIG5hbWU9J3VzZXInLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShkYl9jb2x1bW49J3VzZXInLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field role on organizationtouserlink
--
ALTER TABLE "OrganizationToUserLink" ALTER COLUMN "role" DROP NOT NULL;
--
-- Alter field user on organizationtouserlink
--
SET CONSTRAINTS "OrganizationToUserLink_user_d86c251a_fk_User_id" IMMEDIATE; ALTER TABLE "OrganizationToUserLink" DROP CONSTRAINT "OrganizationToUserLink_user_d86c251a_fk_User_id";
ALTER TABLE "OrganizationToUserLink" ALTER COLUMN "user" SET NOT NULL;
ALTER TABLE "OrganizationToUserLink" ADD CONSTRAINT "OrganizationToUserLink_user_d86c251a_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field user on organizationtouserlink
--
SET CONSTRAINTS "OrganizationToUserLink_user_d86c251a_fk_User_id" IMMEDIATE; ALTER TABLE "OrganizationToUserLink" DROP CONSTRAINT "OrganizationToUserLink_user_d86c251a_fk_User_id";
ALTER TABLE "OrganizationToUserLink" ALTER COLUMN "user" DROP NOT NULL;
ALTER TABLE "OrganizationToUserLink" ADD CONSTRAINT "OrganizationToUserLink_user_d86c251a_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field role on organizationtouserlink
--
ALTER TABLE "OrganizationToUserLink" ALTER COLUMN "role" SET NOT NULL;
COMMIT;

    `)
}

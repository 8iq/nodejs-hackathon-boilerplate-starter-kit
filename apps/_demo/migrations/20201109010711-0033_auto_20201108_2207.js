// auto generated by kmigrator
// KMIGRATOR:0033_auto_20201108_2207:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS4yIG9uIDIwMjAtMTEtMDggMjI6MDcKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMzJfdGVzdGhpc3RvcnlyZWNvcmRfdGVzdGl0ZW1oaXN0b3J5cmVjb3JkJyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3Rlc3RoaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nY3JlYXRlZEJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBkYl9jb25zdHJhaW50PUZhbHNlLCBkYl9pbmRleD1GYWxzZSwgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3NlbGYnLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuRm9yZWlnbktleShibGFuaz1UcnVlLCBkYl9jb2x1bW49J3NlbGYnLCBkYl9jb25zdHJhaW50PUZhbHNlLCBkYl9pbmRleD1GYWxzZSwgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGVzdCcpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J3VwZGF0ZWRCeScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0ndXBkYXRlZEJ5JywgZGJfY29uc3RyYWludD1GYWxzZSwgZGJfaW5kZXg9RmFsc2UsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uRE9fTk9USElORywgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnVzZXInKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVzdGl0ZW1oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0nY3JlYXRlZEJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSdjcmVhdGVkQnknLCBkYl9jb25zdHJhaW50PUZhbHNlLCBkYl9pbmRleD1GYWxzZSwgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5BbHRlckZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0aXRlbWhpc3RvcnlyZWNvcmQnLAogICAgICAgICAgICBuYW1lPSd0ZXN0JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSd0ZXN0JywgZGJfY29uc3RyYWludD1GYWxzZSwgZGJfaW5kZXg9RmFsc2UsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uRE9fTk9USElORywgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRlc3QnKSwKICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuQWx0ZXJGaWVsZCgKICAgICAgICAgICAgbW9kZWxfbmFtZT0ndGVzdGl0ZW1oaXN0b3J5cmVjb3JkJywKICAgICAgICAgICAgbmFtZT0ndXBkYXRlZEJ5JywKICAgICAgICAgICAgZmllbGQ9bW9kZWxzLkZvcmVpZ25LZXkoYmxhbms9VHJ1ZSwgZGJfY29sdW1uPSd1cGRhdGVkQnknLCBkYl9jb25zdHJhaW50PUZhbHNlLCBkYl9pbmRleD1GYWxzZSwgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5ET19OT1RISU5HLCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudXNlcicpLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field createdBy on testhistoryrecord
--
SET CONSTRAINTS "TestHistoryRecord_createdBy_85dfb4aa_fk_User_id" IMMEDIATE; ALTER TABLE "TestHistoryRecord" DROP CONSTRAINT "TestHistoryRecord_createdBy_85dfb4aa_fk_User_id";
DROP INDEX IF EXISTS "TestHistoryRecord_createdBy_85dfb4aa";
--
-- Alter field self on testhistoryrecord
--
SET CONSTRAINTS "TestHistoryRecord_self_d09f530b_fk_Test_id" IMMEDIATE; ALTER TABLE "TestHistoryRecord" DROP CONSTRAINT "TestHistoryRecord_self_d09f530b_fk_Test_id";
DROP INDEX IF EXISTS "TestHistoryRecord_self_d09f530b";
--
-- Alter field updatedBy on testhistoryrecord
--
SET CONSTRAINTS "TestHistoryRecord_updatedBy_8429de21_fk_User_id" IMMEDIATE; ALTER TABLE "TestHistoryRecord" DROP CONSTRAINT "TestHistoryRecord_updatedBy_8429de21_fk_User_id";
DROP INDEX IF EXISTS "TestHistoryRecord_updatedBy_8429de21";
--
-- Alter field createdBy on testitemhistoryrecord
--
SET CONSTRAINTS "TestItemHistoryRecord_createdBy_0d7982dc_fk_User_id" IMMEDIATE; ALTER TABLE "TestItemHistoryRecord" DROP CONSTRAINT "TestItemHistoryRecord_createdBy_0d7982dc_fk_User_id";
DROP INDEX IF EXISTS "TestItemHistoryRecord_createdBy_0d7982dc";
--
-- Alter field test on testitemhistoryrecord
--
SET CONSTRAINTS "TestItemHistoryRecord_test_4500e1e7_fk_Test_id" IMMEDIATE; ALTER TABLE "TestItemHistoryRecord" DROP CONSTRAINT "TestItemHistoryRecord_test_4500e1e7_fk_Test_id";
DROP INDEX IF EXISTS "TestItemHistoryRecord_test_4500e1e7";
--
-- Alter field updatedBy on testitemhistoryrecord
--
SET CONSTRAINTS "TestItemHistoryRecord_updatedBy_aed0bd7a_fk_User_id" IMMEDIATE; ALTER TABLE "TestItemHistoryRecord" DROP CONSTRAINT "TestItemHistoryRecord_updatedBy_aed0bd7a_fk_User_id";
DROP INDEX IF EXISTS "TestItemHistoryRecord_updatedBy_aed0bd7a";
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field updatedBy on testitemhistoryrecord
--
CREATE INDEX "TestItemHistoryRecord_updatedBy_aed0bd7a" ON "TestItemHistoryRecord" ("updatedBy");
ALTER TABLE "TestItemHistoryRecord" ADD CONSTRAINT "TestItemHistoryRecord_updatedBy_aed0bd7a_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field test on testitemhistoryrecord
--
CREATE INDEX "TestItemHistoryRecord_test_4500e1e7" ON "TestItemHistoryRecord" ("test");
ALTER TABLE "TestItemHistoryRecord" ADD CONSTRAINT "TestItemHistoryRecord_test_4500e1e7_fk_Test_id" FOREIGN KEY ("test") REFERENCES "Test" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field createdBy on testitemhistoryrecord
--
CREATE INDEX "TestItemHistoryRecord_createdBy_0d7982dc" ON "TestItemHistoryRecord" ("createdBy");
ALTER TABLE "TestItemHistoryRecord" ADD CONSTRAINT "TestItemHistoryRecord_createdBy_0d7982dc_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field updatedBy on testhistoryrecord
--
CREATE INDEX "TestHistoryRecord_updatedBy_8429de21" ON "TestHistoryRecord" ("updatedBy");
ALTER TABLE "TestHistoryRecord" ADD CONSTRAINT "TestHistoryRecord_updatedBy_8429de21_fk_User_id" FOREIGN KEY ("updatedBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field self on testhistoryrecord
--
CREATE INDEX "TestHistoryRecord_self_d09f530b" ON "TestHistoryRecord" ("self");
ALTER TABLE "TestHistoryRecord" ADD CONSTRAINT "TestHistoryRecord_self_d09f530b_fk_Test_id" FOREIGN KEY ("self") REFERENCES "Test" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field createdBy on testhistoryrecord
--
CREATE INDEX "TestHistoryRecord_createdBy_85dfb4aa" ON "TestHistoryRecord" ("createdBy");
ALTER TABLE "TestHistoryRecord" ADD CONSTRAINT "TestHistoryRecord_createdBy_85dfb4aa_fk_User_id" FOREIGN KEY ("createdBy") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

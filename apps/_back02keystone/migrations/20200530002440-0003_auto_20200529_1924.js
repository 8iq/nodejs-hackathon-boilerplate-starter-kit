// auto generated by kmigrator
// KMIGRATOR:0003_auto_20200529_1924:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMC42IG9uIDIwMjAtMDUtMjkgMTk6MjQKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zCgoKY2xhc3MgTWlncmF0aW9uKG1pZ3JhdGlvbnMuTWlncmF0aW9uKToKCiAgICBkZXBlbmRlbmNpZXMgPSBbCiAgICAgICAgKCdfZGphbmdvX3NjaGVtYScsICcwMDAyX2NoYXRtZXNzYWdlX2NvbmRvX2NvbmRvX3VzZXJzX21hbnknKSwKICAgIF0KCiAgICBvcGVyYXRpb25zID0gWwojICAgICAgICBtaWdyYXRpb25zLlJlbW92ZUZpZWxkKAojICAgICAgICAgICAgbW9kZWxfbmFtZT0nY2hhdG1lc3NhZ2UnLAojICAgICAgICAgICAgbmFtZT0nY2hhdCcsCiMgICAgICAgICksCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSdjaGF0bWVzc2FnZScsCiMgICAgICAgICAgICBuYW1lPSd1c2VyJywKIyAgICAgICAgKSwKIyAgICAgICAgbWlncmF0aW9ucy5SZW1vdmVGaWVsZCgKIyAgICAgICAgICAgIG1vZGVsX25hbWU9J2NvbmRvX3VzZXJzX21hbnknLAojICAgICAgICAgICAgbmFtZT0nQ29uZG9fbGVmdF9pZCcsCiMgICAgICAgICksCiMgICAgICAgIG1pZ3JhdGlvbnMuUmVtb3ZlRmllbGQoCiMgICAgICAgICAgICBtb2RlbF9uYW1lPSdjb25kb191c2Vyc19tYW55JywKIyAgICAgICAgICAgIG5hbWU9J1VzZXJfcmlnaHRfaWQnLAojICAgICAgICApLAogICAgICAgIG1pZ3JhdGlvbnMuRGVsZXRlTW9kZWwoCiAgICAgICAgICAgIG5hbWU9J2NvbmRvX3VzZXJzX21hbnknLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0nY2hhdG1lc3NhZ2UnLAogICAgICAgICksCiAgICAgICAgbWlncmF0aW9ucy5EZWxldGVNb2RlbCgKICAgICAgICAgICAgbmFtZT0nY29uZG8nLAogICAgICAgICksCiAgICBdCg==

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model condo_users_many
--
DROP TABLE "Condo_users_many" CASCADE;
--
-- Delete model chatmessage
--
DROP TABLE "ChatMessage" CASCADE;
--
-- Delete model condo
--
DROP TABLE "Condo" CASCADE;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Delete model condo
--
CREATE TABLE "Condo" ("id" serial NOT NULL PRIMARY KEY, "address" text NOT NULL);
--
-- Delete model chatmessage
--
CREATE TABLE "ChatMessage" ("id" serial NOT NULL PRIMARY KEY, "message" text NOT NULL, "chat" integer NULL, "user" integer NULL);
--
-- Delete model condo_users_many
--
CREATE TABLE "Condo_users_many" ("id" serial NOT NULL PRIMARY KEY, "Condo_left_id" integer NOT NULL, "User_right_id" integer NOT NULL);
ALTER TABLE "ChatMessage" ADD CONSTRAINT "ChatMessage_chat_e0539e32_fk_Condo_id" FOREIGN KEY ("chat") REFERENCES "Condo" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "ChatMessage" ADD CONSTRAINT "ChatMessage_user_f76717e7_fk_User_id" FOREIGN KEY ("user") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "ChatMessage_chat_e0539e32" ON "ChatMessage" ("chat");
CREATE INDEX "ChatMessage_user_f76717e7" ON "ChatMessage" ("user");
ALTER TABLE "Condo_users_many" ADD CONSTRAINT "Condo_users_many_Condo_left_id_5d8a37ce_fk_Condo_id" FOREIGN KEY ("Condo_left_id") REFERENCES "Condo" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "Condo_users_many" ADD CONSTRAINT "Condo_users_many_User_right_id_11f477e6_fk_User_id" FOREIGN KEY ("User_right_id") REFERENCES "User" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "Condo_users_many_Condo_left_id_5d8a37ce" ON "Condo_users_many" ("Condo_left_id");
CREATE INDEX "Condo_users_many_User_right_id_11f477e6" ON "Condo_users_many" ("User_right_id");
COMMIT;

    `)
}

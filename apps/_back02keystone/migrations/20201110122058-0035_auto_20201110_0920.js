// auto generated by kmigrator
// KMIGRATOR:0035_auto_20201110_0920:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMS4yIG9uIDIwMjAtMTEtMTAgMDk6MjAKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMzRfYXV0b18yMDIwMTEwOV8yMTI4JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0JywKICAgICAgICAgICAgbmFtZT0naXRlbScsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0naXRlbScsIG51bGw9VHJ1ZSwgb25fZGVsZXRlPWRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24uRE9fTk9USElORywgcmVsYXRlZF9uYW1lPScrJywgdG89J19kamFuZ29fc2NoZW1hLnRlc3RpdGVtJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKAogICAgICAgICAgICBtb2RlbF9uYW1lPSd0ZXN0aGlzdG9yeXJlY29yZCcsCiAgICAgICAgICAgIG5hbWU9J2l0ZW0nLAogICAgICAgICAgICBmaWVsZD1tb2RlbHMuVVVJREZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field item to test
--
ALTER TABLE "Test" ADD COLUMN "item" uuid NULL CONSTRAINT "Test_item_d2f14304_fk_TestItem_id" REFERENCES "TestItem"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "Test_item_d2f14304_fk_TestItem_id" IMMEDIATE;
--
-- Add field item to testhistoryrecord
--
ALTER TABLE "TestHistoryRecord" ADD COLUMN "item" uuid NULL;
CREATE INDEX "Test_item_d2f14304" ON "Test" ("item");
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field item to testhistoryrecord
--
ALTER TABLE "TestHistoryRecord" DROP COLUMN "item" CASCADE;
--
-- Add field item to test
--
ALTER TABLE "Test" DROP COLUMN "item" CASCADE;
COMMIT;

    `)
}
